<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  user-scalable=0" name="viewport" />
    <link rel="stylesheet" type="text/css" href="m/m.css" />
    <link rel="stylesheet" type="text/css" href="myCss.css" />
    <title>Title</title>
</head>
<body>
<!-- 余额 -->
<div class="wrap-boxbalance hide">
    余额：￥<span>100</span>
</div>
<!-- 充值金额 -->
<div class="wrap-box hide">
    <div class="title">
        <h3><i class='icon'>&#xe603;</i> 充值金额</h3>
    </div>
    <div class="content">
        <div class="minute-template font-big" id="minuteTemplate">
            <div class="shade-box">
                <div class="pay">
                    <ul class="clearfix" id="moneyList">
                        <!-- 套餐 -->
                        <li data-money="20" class='checked'>
                            <strong data-money="20">20元</strong>
                            <span>赠送：<em>2</em>元</span>
                        </li>
                        <li data-money="100">
                            <strong data-money="100">100元</strong>
                            <span>赠送：<em>2</em>元</span>
                        </li>
                        <li data-money="200">
                            <strong>200元</strong>
                            <span>赠送：<em>2</em>元</span>
                        </li>
                        <li data-money="500">
                            <strong>500元</strong>
                            <span>赠送：<em>2</em>元</span>
                        </li>
                        <li data-money="1000">
                            <strong>1000元</strong>
                            <span>赠送：<em>2</em>元</span>
                        </li>
                        <li data-money="2000">
                            <strong>2000元</strong>
                            <span>赠送：<em>500</em>元</span>
                        </li>
                    </ul>
                    <div class="line"></div>
                    <!-- 充值 -->
                    <form id='userPay' action='' method='post'>
                    <input name="orderType" type="hidden" value="余额充值">
                    <input name="money" id="money" type="hidden" value="100">
                    </form>
                    <div class="pay-box clearfix">
                        <a class="pay-confirm-btn" onclick="$('#userPay').submit();">充&nbsp;&nbsp;值</a>
                    </div>
                    <p id="payText">可到账￥<span id="actual-money">0</span> <?php echo $unit;?></p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 选择列表 -->
<div class="wrap-box hide">
    <div class="select-list">
        <div class="list-parent" id="listParentBtn">
            深圳全城
            <i class="arrow-icon">&#xe60e;</i>
        </div>
        <div class="list-child" id="listChildBtn">
            选择地区
            <i class="arrow-icon">&#xe60e;</i>
        </div>
    </div>
</div>
<!-- 选择列表 end -->
<!-- 选择列表父级弹出层  -->
<div class="select-list-shade hide" id="listParentShade">
    <div class="shade-template">
        <ul>
            <li>
                <h3>
                    重庆市
                    <div class="template-line"></div>
                </h3>
                <div class="template-close">
                    <a class="current" href="javascript:;">南岸区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
            <li>
                <h3>
                    重庆市
                    <div class="template-line"></div>
                </h3>
                <div class="template-close">
                    <a href="javascript:;">南岸区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
            <li>
                <h3>
                    重庆市
                    <div class="template-line"></div>
                </h3>
                <div class="template-close">
                    <a href="javascript:;">南岸区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
            <li>
                <h3>
                    重庆市
                    <div class="template-line"></div>
                </h3>
                <div class="template-close">
                    <a href="javascript:;">南岸区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
            <li>
                <h3>
                    重庆市
                    <div class="template-line"></div>
                </h3>
                <div class="template-close">
                    <a href="javascript:;">南岸区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
            <li>
                <h3>
                    重庆市
                    <div class="template-line"></div>
                </h3>
                <div class="template-close">
                    <a href="javascript:;">南岸区</a>
                    <a href="javascript:;">沙坪坝区</a>
                    <a href="javascript:;">沙坪坝区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
            <li>
                <p>更多健身舱，敬请期待</p>
            </li>
        </ul>
    </div>
</div>
<!-- 选择列表父级弹出层 end -->
<!-- 选择列表子级弹出层  -->
<div class="select-list-shade hide" id="listChildShade">
    <div class="shade-template">
        <ul>
            <li>
                <h3>
                    重庆市全城-猩店主题
                    <div class="template-line-short"></div>
                </h3>
                <div class="template-close">
                    <a class="current" href="javascript:;">南岸区</a>
                    <a href="javascript:;">渝北区</a>
                    <a href="javascript:;">渝北区</a>
                    <a href="javascript:;">渝北区</a>
                    <a href="javascript:;">渝北区</a>
                    <a href="javascript:;">渝北区</a>
                    <a href="javascript:;">渝北区</a>
                    <a href="javascript:;">渝北区</a>
                </div>
            </li>
        </ul>
    </div>
</div>
<!-- 选择列表子级弹出层 end -->
<!--个性签名-->
<div class="hysydiv3 wrap-box hide">
    <div class="title">
        <h3>个性签名</h3>
    </div>
    <div class="content">
        <p id="signature-text">我荒废的今日，正是昨天殒身之人祈求的明天</p>
        <div class="more-box">
            <a id="edit-btn" href="javascript:;">编辑&gt;&gt;</a>
        </div>
    </div>
</div>
<!-- 锻炼排行 -->
<div class="hysydiv3 wrap-box timer-box ranking hide">
    <div class="title">
        <h3><i class="ranking-icon">&#xe601;</i> 每周训练时长前五名</h3>
    </div>
    <ul>
        <li class="clearfix">
            <div class="ranking-count fl">1</div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
                <i class="first-icon fr">&#xe641;</i>
            </div>
        </li>
        <li class="clearfix">
            <div class="ranking-count fl">2</div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
                <i class="second-icon fr">&#xe66b;</i>
            </div>
        </li>
        <li class="clearfix">
            <div class="ranking-count fl">3</div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
                <i class="third-icon fr">&#xe66c;</i>
            </div>
        </li>
        <li class="clearfix">
            <div class="ranking-count fl">4</div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
            </div>
        </li>
        <li class="clearfix">
            <div class="ranking-count fl">5</div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
            </div>
        </li>
    </ul>
    <div class="title title-add">
        <h3><i class="ranking-icon">&#xe601;</i> 累计最长锻炼记录</h3>
    </div>
    <ul>
        <li class="clearfix">
            <div class="ranking-count fl"></div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
                <i class="longest-icon fr">&#xe604;</i>
            </div>
        </li>
    </ul>
    <div class="title title-add">
        <h3><i class="ranking-icon">&#xe601;</i> 周最长锻炼记录</h3>
    </div>
    <ul>
        <li class="clearfix">
            <div class="ranking-count fl"></div>
            <div class="ranking-message fl clearfix">
                <div class="message-pic fl">
                    <img src="header-pic.jpg" alt="头像" />
                </div>
                <div class="message-text fl">
                    <strong>双份的阳光</strong>
                    <span>已锻炼100分钟</span>
                </div>
                <i class="week-icon fr">&#xe62e;</i>
            </div>
        </li>
    </ul>
</div>
<!-- 锻炼排行 end -->
<!-- 专项通道 -->
<div class="hysydiv3 wrap-box hide">
    <div class="title">
        <h3>专项通道</h3>
    </div>
    <div class="content">
        <p>专项通道专项通道专项通道专项通道</p>
        <div class="morediv">
            <a href="javascript:;">验证&gt;&gt;</a>
        </div>
    </div>
</div>
<!-- 专项通道 end -->
<!-- 我的荣耀 -->
<div class="xqdiv4 wrap-box hide">
    <div class="title">
        <h3>我的荣耀</h3>
    </div>
    <div class="content">
        <ul>
            <li>
                <span>当前舱内训练时间：</span>
                （<b>1000</b> 分钟）
            </li>
            <li>
                <span>周在线时间：</span>
                （<b>1000</b> 分钟）
            </li>
            <li>
                <span>当月在线时间：</span>
                （<b>1000</b> 分钟）
            </li>
            <li>
                <span>年度在线时间：</span>
                （<b>1000</b> 分钟）
            </li>
            <li>
                <span class="medal">荣誉勋章：</span>
                <img src="http://static1.keepcdn.com/misc/2015/09/28/16/5404cb142e000000.png" width="40" alt="荣誉勋章" />
                <img src="http://static1.keepcdn.com/misc/2015/09/28/16/5404cb321d800000.png" width="40" alt="荣誉勋章" />
                <img src="http://static1.keepcdn.com/misc/2015/09/28/16/5404cb4b1fc00000.png" width="40" alt="荣誉勋章" />
                <img src="http://static1.keepcdn.com/misc/2015/09/28/16/5404cb675d400000.png" width="40" alt="荣誉勋章" />
            </li>
        </ul>
    </div>
</div>
<!-- 我的荣耀 end  -->
<!-- 充值金额 -->
<div class="kwsydiv2 wrap-box hide">
    <div class="title"><h3>充值金额</h3></div>
    <div class="content">
        <ul>
            <li class="kwsyli1">
                <span style="font-size:14px;">金额(多充值更优惠)</span>
                <span data-ck-id="jWk47266929gL"><em class="buy" id="minute-shade-show">选择金额</em></span>
            </li>
        </ul>
    </div>
</div>
<!-- 充值金额 end  -->
<!--个性签名弹出层开始-->
<div class="signature-shade hide" id="signature-shade">
    <div class="hysydiv4 wrap-box shade-box" id="signature-shade-box" style="margin-bottom: 2.5%;">
        <div class="title">
            <h3>个性签名</h3>
        </div>
        <div class="content shade-content">
            <form name="signatureForm">
                <textarea name="signature" id="textarea" rows="4" placeholder="请编辑您的个性签名"></textarea>
                <input type="button" id="signature-shade-confirm" class="signature-shade-confirm" value="确认" />
            </form>
        </div>
    </div>
</div>
<!--个性签名弹出层结束-->
<!--荣誉勋章弹出层开始-->
<div class="medal-shade hide" id="medal-shade">
    <div class="shade-box">
        <div class="medal-pic">
            <img src="http://static1.keepcdn.com/misc/2015/09/28/16/5404cb4b1fc00000.png" alt="" />
        </div>
        <div class="medal-explain">
            <div class="first">1st</div>
            <h3>恭喜您!</h3>
            <span>获得连续7天勋章</span>
        </div>
    </div>
</div>
<!--荣誉勋章弹出层结束-->
<!--充值金额弹出层开始-->
<div class="minute-shade hide" id="minute-shade">
    <div class="shade-box">
        <div class="pay">
            <ul class="clearfix">
                <li class="checked">100元</li>
                <li>300元</li>
                <li>500元</li>
                <li>1000元</li>
                <li>3000元</li>
                <li>5000元</li>
            </ul>
            <div class="line"></div>
            <div class="pay-box clearfix">
                <a href="javascript:;" id="CkMoneyBtn">购&nbsp;&nbsp;买(<span id="ck-money">￥100元</span>)</a>
                <a href="javascript:void(0);" id="minute-shade-close">取消</a>
            </div>
            <p id="payText">可赠送￥<span>10</span>元人民币</p>
        </div>
    </div>
</div>
<!--充值分钟数弹出层结束-->
<!-- 确认开门弹出层 -->
<div class="open-door-shade hide" id="openDoorShade">
    <div class="shade-module">
        <div class="module-head">
            温馨提示！
        </div>
        <div class="module-content">
            现在舱内拥挤
            您的账户余额为 <span>1000</span> 元
            您确定要开门健身吗？
        </div>
        <div class="module-btn">
            <a href="https://github.com/userhehui" class="btnConfirm">确认</a>
            <a href="javascript:;" class="btn-cancel" id="btnCancel">取消</a>
        </div>
    </div>
</div>
<!-- 确认开门弹出层 end -->


<div class="out-door-shade" id="outDoorShade">
    <div class="shade-module">
        <div class="module-head">
            温馨提示！
        </div>
        <div class="module-content">
            您本次健身时长：<span id="totalTimeText"> <!--<?php echo $StaTime; ?>--> 60 </span>分钟<br />
            应付<span id="totalMoneyText"><!--<?php echo $consume;?>--> 20 </span>元<br />
            若参加充<span> 2000 </span>返<span> 2000 </span>活动<br />
            则实际消费 <span> 10 </span> 元
        </div>
        <div class="module-btn">
            <a href="<?php echo $root.'library/mPost.php?t=scanQRCode&did='.$device['DeviceId'].'&status=out'; ?>" class="btn-confirm" id="outConfirm">支付</a>
            <a href="javascript:;" class="btn-cancel" id="outCancel">取消</a>
        </div>
    </div>
</div>
<!-- 弹出层 -->
<div class="miss-shade hide" id="missShade">
    <div class="shade-module">
        <div class="module-head">
            温馨提示！
        </div>
        <div class="module-content">
           已开门
        </div>
    </div>
</div>
</body>
<script>
    window.onload = function() {
        var missShade = document.getElementById('missShade');
        setTimeout(function(){
            missShade.style.display = 'none';
        },2000)

        /**
         * 计算金额
         * @author He Hui
         * */
        //找元素
        var minuteTemplate = document.getElementById('minuteTemplate');
        var liSet = minuteTemplate.querySelectorAll('li');
        var rechargeBtn = document.getElementById('rechargeBtn');
        var moneyList = document.getElementById('moneyList');
        var moneyLi = moneyList.getElementsByTagName('li')[0];
        var dataMoney = moneyLi.getAttribute('data-money');
        var money = document.getElementById('money');
        var giftMoneySet = minuteTemplate.querySelectorAll('em');

        //金额
        money.value = dataMoney;
        var actualRecharge = 0.1 ;//到账比例

        //乘法函数
        function accMul(arg1,arg2) {
            var m=0,s1=arg1.toString(),s2=arg2.toString();
            try{m+=s1.split(".")[1].length}catch(e){}
            try{m+=s2.split(".")[1].length}catch(e){}
            return  Number(s1.replace(".",""))*Number(s2.replace(".",""))/Math.pow(10,m)
        }

        //计算
        var actualMoney = accMul(money.value,actualRecharge);
        var actualMoneyElement = document.getElementById('actual-money');

        //到账金额
        actualMoneyElement.innerHTML =  parseInt(actualMoney) + parseInt(money.value);

        //切换金额
        for (var i=0;i<liSet.length;i++) {
            liSet[i].onclick = function() {
                for (var i=0;i<liSet.length;i++) {
                    liSet[i].className = '';
                }
                this.className = 'checked';
                var dataMoney = this.getAttribute('data-money');
                money.value = dataMoney;
                var actualMoney = accMul(money.value,actualRecharge);
                actualMoneyElement.innerHTML =  parseInt(actualMoney) + parseInt(money.value);
            }
            var dataMoney = liSet[i].getAttribute('data-money');
            var actualMoney = accMul(dataMoney,actualRecharge);
            //赠送金额
            giftMoneySet[i].innerHTML = actualMoney;
        }



        /**
         * 选择列表
         * @author He Hui
         * */
        var listParentBtn = document.getElementById('listParentBtn');
        var listChildBtn = document.getElementById('listChildBtn');
        var listParentShade = document.getElementById('listParentShade');
        var listChildShade = document.getElementById('listChildShade');
        listParentBtn.onclick = function() {
            listParentShade.style.display = 'block';
        }
        listParentShade.onclick = function() {
            this.style.display = 'none';
        }
        listChildBtn.onclick = function() {
            listChildShade.style.display = 'block';
        }
        listChildShade.onclick = function() {
            this.style.display = 'none';
        }

        /**
         * 确认开门弹出层
         * @author He Hui
         * */
        var openDoorShade = document.getElementById('openDoorShade');
        var btnCancel = document.getElementById('btnCancel');
        btnCancel.onclick = function() {
            openDoorShade.style.display = 'none';
        }

        /**
         * 点击显示/关闭个性签名,充值分钟数弹出层
         * */
        var editBtn = document.getElementById('edit-btn');
        var signatureShade = document.getElementById('signature-shade');
        var confirmBtn = document.getElementById('signature-shade-confirm');
        var signatureShadeBox = document.getElementById('signature-shade-box');
        var minuteShade = document.getElementById('minute-shade');
        var minuteShadeShow = document.getElementById('minute-shade-show');
        var minuteShadeClose = document.getElementById('minute-shade-close');
        var spanSet = minuteShade.querySelectorAll('li');
        for (var i=0;i<spanSet.length;i++) {
            spanSet[i].onclick = function() {
                for (var i=0;i<spanSet.length;i++) {
                    spanSet[i].className = '';
                }
                this.className = 'checked';
            }
        }
        //编辑按钮点击事件
        editBtn.onclick = function(e) {
            e.stopPropagation();
            signatureShade.style.display = 'block';
        }
        //确认按钮点击事件
        confirmBtn.onclick = function(e) {
            e.stopPropagation();
            //do something...
        }
        //选择分钟数弹出层
        minuteShadeShow.onclick = function(e) {
            e.stopPropagation();
            minuteShade.style.display = 'block';
        }
        //取消选择分钟数弹出层
        minuteShadeClose.onclick = function(e) {
            e.stopPropagation();
            minuteShade.style.display = 'none';
        }
        //签名弹出层盒子
        signatureShadeBox.onclick = function(e) {
            e.stopPropagation();
        }
        var medalShade = document.getElementById('medal-shade');
        //关闭弹出层
        document.onclick = function() {
            signatureShade.style.display = 'none';
            medalShade.style.display = 'none';
        }
    }
</script>
</html>